apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Include Prometheus resources
resources:
  - service-account.yaml
  - service-monitor.yaml
  - deployment.yaml

# Generate ConfigMap from configmap.yaml
configMapGenerator:
  - name: prometheus-config
    behavior: merge
    files:
      - prometheus.yml=configmap.yaml

# Common labels for Prometheus resources
commonLabels:
  app.kubernetes.io/component: prometheus
  app.kubernetes.io/name: prometheus

# Name prefix for resources
namePrefix: prometheus-

# Disable name suffix hashes for ConfigMaps
generatorOptions:
  disableNameSuffixHash: true
